# Glossary — <BOT_NAME>
Версия: v0.1  
Последнее обновление: <YYYY-MM-DD>

Цель: чтобы у тебя, Codex и у будущих модулей было **одно значение слов**.  
Правило: если термин влияет на 2+ модуля — фиксируем его здесь.

---

## Пользователи и доступ
**User / Пользователь** — любой, кто пишет боту в Telegram.  
**Role / Роль** — тип пользователя (ученик/учитель/админ и т.п.), определяет доступы.  
**Access Gate / Гейт доступа** — проверка условия перед входом в модуль (роль, подписка, лимит).  
**Subscription Gate / Подписка-гейт** — проверка подписки на канал/чат для допуска к функциям.

## Навигация и экраны
**Main Menu / Главное меню** — корневой экран с кнопками модулей.  
**Module / Модуль** — мини-бот внутри бота (одна кнопка меню = одна ветка).  
**Branch / Ветка** — сценарная линия внутри модуля (подветка).  
**Screen / Экран** — состояние UI (текст + клавиатура), показываемое пользователю.  
**Flow / Сценарий** — последовательность экранов и действий (карта метро).  
**Back / Назад** — переход на предыдущий экран/шаг внутри модуля.  
**Cancel / Отмена** — выход из процесса без сохранения результата.  
**Home/Menu / Меню** — выход в главное меню.

## Telegram-механика
**Command / Команда** — `/start`, `/help` и т.п.  
**Callback** — нажатие inline-кнопки, прилетает callback_query.  
**Callback Data** — строка, которую передаёт inline-кнопка (обычно `prefix:param`).  
**Callback Prefix / Префикс** — первая часть callback_data, по которой роутим хендлеры.  
**Answer (callback.answer)** — обязательный быстрый ответ на callback, чтобы не было “вечной загрузки”.  
**Inline Keyboard** — кнопки под сообщением (callback).  
**Reply Keyboard** — клавиатура под полем ввода (реже, по необходимости).

## Состояния и ввод
**FSM / State / Состояние** — шаг “ожидаем ввод/действие” (если используешь FSM).  
**Step / Шаг** — логическая стадия сценария (может совпадать со state, а может нет).  
**User Input / Ввод пользователя** — текст/число/дата, присланные сообщением.  
**FormatGate / Валидация формата** — правило: не “додумывать”, а валидировать и просить повтор.  
**Normalization / Нормализация** — trim/приведение формата (пробелы, регистр, запятые).

## Данные и хранение (RailwayData / JSON)
**RailwayData / Volume** — постоянное хранилище Railway, куда пишем JSON файлы.  
**DATA_PATH** — путь к папке volume, где лежат данные.  
**Entity / Сущность** — объект предметной области (User, Slot, Booking, Lesson, Progress…).  
**User-centric data** — данные, которые принадлежат одному пользователю (настройки/прогресс/очки).  
**Source of Truth / Источник правды** — где хранится “истинное” значение (не дублируем без правил).  
**Schema Version / Версия схемы** — номер версии структуры данных (в `system.json` или аналоге).  
**Migration / Миграция** — преобразование старых данных в новый формат.  
**Invariant / Инвариант** — условие, которое всегда должно быть истинно (например, UI соответствует данным).  
**Atomic Write / Атомарная запись** — запись через tmp → rename, чтобы не портить JSON при сбое.  
**Backup Broken JSON** — правило: битый JSON переименовать в `.broken.<ts>.json` и создать новый.

## Логика продукта (универсальные термины)
**Settings / Настройки** — предпочтения пользователя (язык, таймзона, уведомления, фильтры).  
**Progress / Прогресс** — прохождение тем/уровней/шагов обучения.  
**Points / Очки** — числовая награда/счёт.  
**XP / Опыт** — “очки опыта”, отдельные от points (если используешь).  
**Rating / Рейтинг** — место/сортировка пользователей (может считаться из points).  
**Quota / Лимит** — ограничение по количеству действий/времени/попыткам.  
**Deadline Rule / Дедлайн-правило** — “нельзя делать X позже чем за N минут/часов”.

## Качество и проверка
**Contract / Контракт** — описание ожидаемого поведения (входы → шаги → данные → edge cases).  
**Module Contract** — контракт конкретного модуля (`modules/<module>/contract.md`).  
**Test Checklist** — чеклист ручных проверок (`modules/<module>/tests.md`).  
**Smoke Test** — минимальная проверка “самое важное работает” после деплоя.  
**PR-Check** — проверка по flow + линзам (логика/данные/надёжность/альтернативы).  
**Regression / Регрессия** — сломалось то, что раньше работало.  
**NoHang** — правило: callback не должен “висеть” (answer).  
**Clean Chat** — правило: не спамим, основной экран через edit, старые кнопки не остаются мёртвыми.

## Инструменты (твой процесс)
**Codex Task** — инструкция для Codex: границы файлов + контракт + критерии готовности.  
**Mode D/A/C** — режимы: Architect / Diagnostician / Codex execution + verify (по BotBuilder).

---

## Добавление новых терминов (правило)
- Если термин используется в 2+ модулях — добавь сюда.
- Если термин только внутри одного модуля — можно описать в `modules/<module>/contract.md`.
