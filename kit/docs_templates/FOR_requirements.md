# Requirements (Project Contract) — <BOT_NAME>
Версия: v0.1  
Дата: <YYYY-MM-DD>  
Владелец: <you>  

## 1) Цель бота (1–3 предложения)
- Для кого: <аудитория>
- Главная ценность: <что пользователь получает>
- 3 ключевые функции: (1) … (2) … (3) …

## 2) Роли и права (матрица на уровне смысла)
Роли: <User / Student / Teacher / Admin …>  
Коротко по каждой:
- <ROLE1>: может … / не может …
- <ROLE2>: может … / не может …

**Правило:** если действие/право влияет на 2+ модуля — оно фиксируется здесь.

## 3) Главное меню = список модулей
Кнопки (модули):
1) <module_1> — 1 строка “что делает”
2) <module_2> — …
3) <module_3> — …

**Принцип архитектуры:** modules-first (каждая кнопка — мини-бот).  
Общее — только в `bot/shared/` и только после явного решения.

## 4) Глобальные правила UX (важно)
### Clean Chat (по умолчанию)
- Один главный экран — через `edit_message_text`/`edit_markup`, не спамим новыми сообщениями без причины
- Ввод пользователя (если это шаг ввода) удаляем после обработки, если это принято в проекте
- Ошибки: показываем понятным текстом, где нужно — `alert`
- Для callback: `answer()` всегда (нет “вечной загрузки”)

### Навигация
- В каждом модуле есть понятный выход: Назад / Меню
- Нельзя оставлять пользователя в тупике без кнопок

## 5) Глобальные форматы и локаль
- Язык интерфейса: <RU/EN/…>
- Таймзона: <default> + правило: где хранится (в профиле?) и как применяется
- Форматы:
  - дата: <DD.MM.YYYY / ISO / …>
  - время: <HH:MM / …>
  - числа/очки/баллы: <целые?>, округление
- **Запрет “додумывания”:** если формат невалидный — просим повторить по шаблону.

## 6) Глобальные данные/хранилище (только верхний уровень)
Хранилище: <SQLite / JSON / Sheets>  
Что считаем “общими сущностями” (если есть):
- User (профиль/роль/таймзона/язык/настройки)
- <Slot/Booking/Progress…> — только если реально используется несколькими модулями

**Важно:** детали полей и логики — в контракте конкретного модуля (`modules/<module>/contract.md`).

## 7) Глобальные правила/политики (если влияют на несколько модулей)
Примеры (заполни нужное):
- Дедлайн действий: “нельзя записаться позже чем за X минут”
- Лимиты: “максимум N попыток/слотов/действий в день”
- Доступ: “роль A не видит модуль B”
- Платёж/подписка: “что открывает доступ”

## 8) Non-goals (что НЕ делаем)
- …
- …
(Это помогает агенту не “придумывать” лишнее.)

## 9) Definition of Done (проектный уровень)
Проект/фича считается готовой, если:
- [ ] базовые сценарии по ключевым модулям работают end-to-end
- [ ] соблюдены глобальные UX правила (clean chat, answer)
- [ ] у каждого модуля есть `tests.md` (8–15 пунктов) и он пройден
- [ ] нет регрессии в меню/навигации

## 10) Как работаем с Codex (1 абзац)
- Мы формулируем контракт (requirements + contract модуля)
- Потом выдаём Codex TASK с границами файлов
- После изменений прогоняем PR-Check и тест-чеклист
